---
import DefaultLayout from "../layouts/Default.astro";
import HeroSection from "../sections/HeroSection";
import FeaturesCardsSection from "../sections/FeaturesCardsSection";
import FeaturesGridSection from "../sections/FeaturesGridSection";
import LatestPostsSection from '../sections/LatestPostsSection';


import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);

const latestPosts = posts.slice(0, 4);
---

<DefaultLayout>
  <HeroSection client:load/>
  <FeaturesCardsSection client:load/>
  <FeaturesGridSection client:load/>
  <LatestPostsSection
    posts={latestPosts}
    client:load/>
</DefaultLayout>
